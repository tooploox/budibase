---
# Source: budibase-dev/charts/budibase/charts/couchdb/templates/networkpolicy.yaml
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: dev-couchdb
  labels:
    app: couchdb
    chart: couchdb-3.3.4
    release: dev
    heritage: Helm
spec:
  podSelector:
    matchLabels:
      app: couchdb
      release: dev
  ingress:
    - ports:
        - protocol: TCP
          port: 5984
    - ports:
        - protocol: TCP
          port: 9100
        - protocol: TCP
          port: 4369
      from:
        - podSelector:
            matchLabels:
              app: couchdb
              release: dev
  policyTypes:
    - Ingress
---
# Source: budibase-dev/charts/budibase/charts/couchdb/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: dev-couchdb
  labels:
    app: couchdb
    chart: couchdb-3.3.4
    release: dev
    heritage: Helm
---
# Source: budibase-dev/charts/budibase/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: dev-budibase
  labels:
    helm.sh/chart: budibase-0.3.01
    app.kubernetes.io/name: budibase
    app.kubernetes.io/instance: dev
    app.kubernetes.io/version: "0.0.0"
    app.kubernetes.io/managed-by: Helm
---
# Source: budibase-dev/charts/budibase/charts/couchdb/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: dev-couchdb
  labels:
    app: dev-couchdb
    chart: "couchdb-3.3.4"
    release: "dev"
    heritage: "Helm"
type: Opaque
data:
  adminUsername: "YWRtaW4="
  adminPassword: "N3lLNktiaURVa1dFdlZxbUlKYnE="
  cookieAuthSecret: "YktETVlpaVVheTFuSlJ5RWdkNU8="
---
# Source: budibase-dev/charts/budibase/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: dev-budibase
  labels:
    app: dev-budibase
    chart: "budibase-0.3.01"
    release: "dev"
    heritage: "Helm"
type: Opaque
data:
  internalApiKey: "T3gzWUFGVnNSSTRzQ1ZBNUI3TnI="
  jwtSecret: "N2tpWXdWdVMwZ1ZJU3VHRU1NWTY="
  objectStoreAccess: "UVp2VDZJa3BEOE1DdE1YWlkydE8="
  objectStoreSecret: "UlFsaVJralRCMDd6d2hhTldRNmc="
---
# Source: budibase-dev/charts/budibase/charts/couchdb/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: dev-couchdb
  labels:
    app: couchdb
    chart: "couchdb-3.3.4"
    heritage: "Helm"
    release: "dev"
data:
  inifile: |
    [chttpd]
    bind_address = any
    require_valid_user = false
    
    [couchdb]
    uuid = budibase-couchdb
    
    

  seedlistinifile: |
    [cluster]
    seedlist = couchdb@dev-couchdb-0.dev-couchdb.budibase-dev.svc.cluster.local,couchdb@dev-couchdb-1.dev-couchdb.budibase-dev.svc.cluster.local,couchdb@dev-couchdb-2.dev-couchdb.budibase-dev.svc.cluster.local
---
# Source: budibase-dev/charts/budibase/templates/minio-data-persistentvolumeclaim.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  creationTimestamp: null
  labels:
    io.kompose.service: minio-data
  name: minio-data
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 100Mi
  
status: {}
---
# Source: budibase-dev/charts/budibase/templates/redis-data-persistentvolumeclaim.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  creationTimestamp: null
  labels:
    io.kompose.service: redis-data
  name: redis-data
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 100Mi
  
status: {}
---
# Source: budibase-dev/charts/budibase/charts/couchdb/templates/headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: dev-couchdb
  labels:
    app: couchdb
    chart: couchdb-3.3.4
    release: dev
    heritage: Helm
spec:
  clusterIP: None
  publishNotReadyAddresses: true
  ports:
    - name: couchdb
      port: 5984
  selector:
    app: couchdb
    release: dev
---
# Source: budibase-dev/charts/budibase/charts/couchdb/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: dev-svc-couchdb
  labels:
    app: couchdb
    chart: couchdb-3.3.4
    release: dev
    heritage: Helm
spec:
  ports:
    - port: 5984
      protocol: TCP
      targetPort: 5984
  type: ClusterIP
  selector:
    app: couchdb
    release: dev
---
# Source: budibase-dev/charts/budibase/templates/app-service-service.yaml
apiVersion: v1
kind: Service
metadata:
  annotations:
    kompose.cmd: kompose convert
    kompose.version: 1.21.0 (992df58d8)
  creationTimestamp: null
  labels:
    io.kompose.service: app-service
  name: app-service
spec:
  ports:
  - name: "4002"
    port: 4002
    targetPort: 4002
  selector:
    io.kompose.service: app-service
status:
  loadBalancer: {}
---
# Source: budibase-dev/charts/budibase/templates/minio-service-service.yaml
apiVersion: v1
kind: Service
metadata:
  annotations:
    kompose.cmd: kompose convert
    kompose.version: 1.21.0 (992df58d8)
  creationTimestamp: null
  labels:
    io.kompose.service: minio-service
  name: minio-service
spec:
  ports:
  - name: "9000"
    port: 9000
    targetPort: 9000
  selector:
    io.kompose.service: minio-service
status:
  loadBalancer: {}
---
# Source: budibase-dev/charts/budibase/templates/proxy-service-service.yaml
apiVersion: v1
kind: Service
metadata:
  annotations:
    kompose.cmd: kompose convert
    kompose.version: 1.21.0 (992df58d8)
    cloud.google.com/backend-config: '{"default": "dev-budibase"}'
  creationTimestamp: null
  labels:
    app.kubernetes.io/name: budibase-proxy
  name: proxy-service
spec:
  ports:
  - name: "10000"
    port: 10000
    targetPort: 10000
  selector:
    app.kubernetes.io/name: budibase-proxy
  type: NodePort
status:
  loadBalancer: {}
---
# Source: budibase-dev/charts/budibase/templates/redis-service-service.yaml
apiVersion: v1
kind: Service
metadata:
  annotations:
    kompose.cmd: kompose convert
    kompose.version: 1.21.0 (992df58d8)
  creationTimestamp: null
  labels:
    io.kompose.service: redis-service
  name: redis-service
spec:
  ports:
  - name: "6379"
    port: 6379
    targetPort: 6379
  selector:
    io.kompose.service: redis-service
status:
  loadBalancer: {}
---
# Source: budibase-dev/charts/budibase/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: dev-budibase
  labels:
    helm.sh/chart: budibase-0.3.01
    app.kubernetes.io/name: budibase
    app.kubernetes.io/instance: dev
    app.kubernetes.io/version: "0.0.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 10000
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/name: budibase
    app.kubernetes.io/instance: dev
---
# Source: budibase-dev/charts/budibase/templates/worker-service-service.yaml
apiVersion: v1
kind: Service
metadata:
  annotations:
    kompose.cmd: kompose convert
    kompose.version: 1.21.0 (992df58d8)
  creationTimestamp: null
  labels:
    io.kompose.service: worker-service
  name: worker-service
spec:
  ports:
  - name: "4003"
    port: 4003
    targetPort: 4003
  selector:
    io.kompose.service: worker-service
status:
  loadBalancer: {}
---
# Source: budibase-dev/charts/budibase/templates/app-service-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    kompose.cmd: kompose convert
    kompose.version: 1.21.0 (992df58d8)
  creationTimestamp: null
  labels:
    io.kompose.service: app-service
  name: app-service
spec:
  replicas: 1
  selector:
    matchLabels:
      io.kompose.service: app-service
  strategy:
    type: RollingUpdate
  template:
    metadata:
      annotations:
        kompose.cmd: kompose convert
        kompose.version: 1.21.0 (992df58d8)

      creationTimestamp: null
      labels:
        io.kompose.service: app-service
    spec:
      containers:
      - env:
        - name: BUDIBASE_ENVIRONMENT
          value: PRODUCTION
        - name: DEPLOYMENT_ENVIRONMENT
          value: "kubernetes"
        - name: COUCH_DB_URL
          
          value: http://dev-svc-couchdb:5984
          
        
        - name: COUCH_DB_USER
          valueFrom:
            secretKeyRef:
              name: dev-couchdb
              key: adminUsername
        - name: COUCH_DB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: dev-couchdb
              key: adminPassword
        
        - name: ENABLE_ANALYTICS
          value: "1"
        - name: INTERNAL_API_KEY
          valueFrom:
            secretKeyRef:
              name: dev-budibase
              key: internalApiKey
        - name: JWT_SECRET
          valueFrom:
            secretKeyRef:
              name: dev-budibase
              key: jwtSecret
        
        - name: MINIO_ENABLED
          value: "true"
        - name: MINIO_ACCESS_KEY
          valueFrom:
            secretKeyRef:
              name: dev-budibase
              key: objectStoreAccess
        - name: MINIO_SECRET_KEY
          valueFrom:
            secretKeyRef:
              name: dev-budibase
              key: objectStoreSecret
        - name: CLOUDFRONT_CDN
          value: ""
        - name: CLOUDFRONT_PUBLIC_KEY_ID
          value: ""
        - name: CLOUDFRONT_PRIVATE_KEY_64
          value: ""
        - name: MINIO_URL
          value: http://minio-service:9000
        - name: PLUGIN_BUCKET_NAME
          value: 
        - name: APPS_BUCKET_NAME
          value: 
        - name: GLOBAL_BUCKET_NAME
          value: 
        - name: BACKUPS_BUCKET_NAME
          value: 
        - name: PORT
          value: "4002"
        
        - name: MULTI_TENANCY
          value: "0"
        - name: LOG_LEVEL
          value: "info"
        - name: REDIS_PASSWORD
          value: budibase
        - name: REDIS_URL
          
          value: redis-service:6379
          
        - name: SELF_HOSTED
          value: "1"
        - name: SENTRY_DSN
          value: 
        - name: POSTHOG_TOKEN
          value: phc_bIjZL7oh2GEUd2vqvTBH8WvrX0fWTFQMs6H5KQxiUxU
        - name: WORKER_URL
          value: http://worker-service:4003
        - name: PLATFORM_URL
          value: ""
        - name: ACCOUNT_PORTAL_URL
          value: ""
        - name: ACCOUNT_PORTAL_API_KEY
          value: ""
        - name: COOKIE_DOMAIN
          value: ""
        - name: HTTP_MIGRATIONS
          value: "0"
        - name: GOOGLE_CLIENT_ID
          value: ""
        - name: GOOGLE_CLIENT_SECRET
          value: ""
        - name: AUTOMATION_MAX_ITERATIONS
          value: "200"
        - name: TENANT_FEATURE_FLAGS
          value: "*:LICENSING,*:USER_GROUPS"
        
        
        
        
        
        
        
        
        
        
        - name: CDN_URL
          value: 
        

        image: budibase/apps:latest
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /health
            port: 4002
          initialDelaySeconds: 5
          periodSeconds: 5
        name: bbapps
        ports:
        - containerPort: 4002
        
      
      restartPolicy: Always
      serviceAccountName: ""
status: {}
---
# Source: budibase-dev/charts/budibase/templates/minio-service-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    kompose.cmd: kompose convert
    kompose.version: 1.21.0 (992df58d8)
  creationTimestamp: null
  labels:
    io.kompose.service: minio-service
  name: minio-service
spec:
  replicas: 1
  selector:
    matchLabels:
      io.kompose.service: minio-service
  strategy:
    type: Recreate
  template:
    metadata:
      annotations:
        kompose.cmd: kompose convert
        kompose.version: 1.21.0 (992df58d8)
      creationTimestamp: null
      labels:
        io.kompose.service: minio-service
    spec:
      containers:
      - args:
        - server
        - /data
        env:
        - name: MINIO_BROWSER
          value: "true"
        - name: MINIO_ACCESS_KEY
          valueFrom:
            secretKeyRef:
              name: dev-budibase
              key: objectStoreAccess
        - name: MINIO_SECRET_KEY
          valueFrom:
            secretKeyRef:
              name: dev-budibase
              key: objectStoreSecret

        image: minio/minio
        imagePullPolicy: ""
        livenessProbe:
          exec:
            command:
            - curl
            - -f
            - http://localhost:9000/minio/health/live
          failureThreshold: 3
          periodSeconds: 30
          timeoutSeconds: 20
        name: minio-service
        ports:
        - containerPort: 9000
        
        volumeMounts:
        - mountPath: /data
          name: minio-data
      
      restartPolicy: Always
      serviceAccountName: ""
      volumes:
      - name: minio-data
        persistentVolumeClaim:
          claimName: minio-data
status: {}
---
# Source: budibase-dev/charts/budibase/templates/proxy-service-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    kompose.cmd: kompose convert
    kompose.version: 1.21.0 (992df58d8)
  creationTimestamp: null
  labels:
    app.kubernetes.io/name: budibase-proxy
  name: proxy-service
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: budibase-proxy
  strategy:
    type: RollingUpdate
  template:
    metadata:
      annotations:
        kompose.cmd: kompose convert
        kompose.version: 1.21.0 (992df58d8)

      creationTimestamp: null
      labels:
        app.kubernetes.io/name: budibase-proxy
    spec:
      containers:
      - image: budibase/proxy:latest
        imagePullPolicy: Always
        name: proxy-service
        ports:
        - containerPort: 10000
        env:
        - name: APPS_UPSTREAM_URL
          value: "http://app-service.budibase-dev.svc.cluster.local:4002"
        - name: WORKER_UPSTREAM_URL
          value: "http://worker-service.budibase-dev.svc.cluster.local:4003"
        - name: MINIO_UPSTREAM_URL
          value: "http://minio-service.budibase-dev.svc.cluster.local:9000"
        - name: COUCHDB_UPSTREAM_URL
          value: "http://dev-svc-couchdb:5984"
        - name: RESOLVER
          
          value: kube-dns.kube-system.svc.cluster.local
          
        
        volumeMounts:
      
      restartPolicy: Always
      serviceAccountName: ""
      volumes:
status: {}
---
# Source: budibase-dev/charts/budibase/templates/redis-service-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    kompose.cmd: kompose convert
    kompose.version: 1.21.0 (992df58d8)
  creationTimestamp: null
  labels:
    io.kompose.service: redis-service
  name: redis-service
spec:
  replicas: 1
  selector:
    matchLabels:
      io.kompose.service: redis-service
  strategy:
    type: Recreate
  template:
    metadata:
      annotations:
        kompose.cmd: kompose convert
        kompose.version: 1.21.0 (992df58d8)
      creationTimestamp: null
      labels:
        io.kompose.service: redis-service
    spec:
      containers:
      - args:
        - redis-server 
        - --requirepass 
        - budibase
        image: redis
        imagePullPolicy: ""
        name: redis-service
        ports:
        - containerPort: 6379
        
        volumeMounts:
        - mountPath: /data
          name: redis-data
      
      restartPolicy: Always
      serviceAccountName: ""
      volumes:
      - name: redis-data
        persistentVolumeClaim:
          claimName: redis-data

status: {}
---
# Source: budibase-dev/charts/budibase/templates/worker-service-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    kompose.cmd: kompose convert
    kompose.version: 1.21.0 (992df58d8)
  creationTimestamp: null
  labels:
    io.kompose.service: worker-service
  name: worker-service
spec:
  replicas: 1

  selector:
    matchLabels:
      io.kompose.service: worker-service
  strategy:
    type: RollingUpdate
  template:
    metadata:
      annotations:
        kompose.cmd: kompose convert
        kompose.version: 1.21.0 (992df58d8)

      creationTimestamp: null
      labels:
        io.kompose.service: worker-service
    spec:
      containers:
      - env:
        - name: BUDIBASE_ENVIRONMENT
          value: PRODUCTION
        - name: DEPLOYMENT_ENVIRONMENT
          value: "kubernetes"
        - name: CLUSTER_PORT
          value: "4003"
        
        - name: COUCH_DB_USER
          valueFrom:
            secretKeyRef:
              name: dev-couchdb
              key: adminUsername
        - name: COUCH_DB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: dev-couchdb
              key: adminPassword
        
        - name: COUCH_DB_URL
          
          value: http://dev-svc-couchdb:5984
          
        - name: INTERNAL_API_KEY
          valueFrom:
            secretKeyRef:
              name: dev-budibase
              key: internalApiKey
        - name: JWT_SECRET
          valueFrom:
            secretKeyRef:
              name: dev-budibase
              key: jwtSecret
        
        - name: MINIO_ENABLED
          value: "true"
        - name: MINIO_ACCESS_KEY
          valueFrom:
            secretKeyRef:
              name: dev-budibase
              key: objectStoreAccess
        - name: MINIO_SECRET_KEY
          valueFrom:
            secretKeyRef:
              name: dev-budibase
              key: objectStoreSecret
        - name: MINIO_URL
          value: http://minio-service:9000
        - name: CLOUDFRONT_CDN
          value: ""
        - name: CLOUDFRONT_PUBLIC_KEY_ID
          value: ""
        - name: CLOUDFRONT_PRIVATE_KEY_64
          value: ""
        - name: PLUGIN_BUCKET_NAME
          value: 
        - name: APPS_BUCKET_NAME
          value: 
        - name: GLOBAL_BUCKET_NAME
          value: 
        - name: BACKUPS_BUCKET_NAME
          value: 
        - name: PORT
          value: "4003"
        - name: MULTI_TENANCY
          value: "0"
        - name: LOG_LEVEL
          value: "info"
        - name: REDIS_PASSWORD
          value: "budibase"
        - name: REDIS_URL
          
          value: redis-service:6379
          
        - name: SELF_HOSTED
          value: "1"
        - name: SENTRY_DSN
          value: 
        - name: ENABLE_ANALYTICS
          value: "1"
        - name: POSTHOG_TOKEN
          value: phc_bIjZL7oh2GEUd2vqvTBH8WvrX0fWTFQMs6H5KQxiUxU
        - name: ACCOUNT_PORTAL_URL
          value: ""
        - name: ACCOUNT_PORTAL_API_KEY
          value: ""
        - name: PLATFORM_URL
          value: ""
        - name: COOKIE_DOMAIN
          value: ""
        - name: SMTP_FALLBACK_ENABLED
          value: "false"
        - name: SMTP_USER
          value: 
        - name: SMTP_PASSWORD
          value: 
        - name: SMTP_HOST
          value: 
        - name: SMTP_PORT
          value: 
        - name: SMTP_FROM_ADDRESS
          value: 
        - name: APPS_URL
          value: http://app-service:4002
        - name: GOOGLE_CLIENT_ID
          value: ""
        - name: GOOGLE_CLIENT_SECRET
          value: ""
        - name: TENANT_FEATURE_FLAGS
          value: "*:LICENSING,*:USER_GROUPS"
        
        
        
        
        
        
        - name: CDN_URL
          value: 
        

        image: budibase/worker:latest
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /health
            port: 4003
          initialDelaySeconds: 5
          periodSeconds: 5
        name: bbworker
        ports:
        - containerPort: 4003
        
      
      restartPolicy: Always
      serviceAccountName: ""
status: {}
---
# Source: budibase-dev/charts/budibase/charts/couchdb/templates/statefulset.yaml
apiVersion:  apps/v1
kind: StatefulSet
metadata:
  name: dev-couchdb
  labels:
    app: couchdb
    chart: couchdb-3.3.4
    release: dev
    heritage: Helm
spec:
  replicas: 3
  serviceName: dev-couchdb
  podManagementPolicy: Parallel
  selector:
    matchLabels:
      app: couchdb
      release: dev
  template:
    metadata:
      labels:
        app: couchdb
        release: dev
    spec:
      serviceAccountName: dev-couchdb
      initContainers:
        - name: init-copy
          image: "busybox:latest"
          imagePullPolicy: Always
          command: ['sh','-c','cp /tmp/chart.ini /default.d; cp /tmp/seedlist.ini /default.d; ls -lrt /default.d;']
          volumeMounts:
          - name: config
            mountPath: /tmp/
          - name: config-storage
            mountPath: /default.d
      containers:
        - name: couchdb
          image: "couchdb:3.2.1"
          imagePullPolicy: IfNotPresent
          ports:
            - name: couchdb
              containerPort: 5984
            - name: epmd
              containerPort: 4369
            - containerPort: 9100
          env:
            - name: COUCHDB_USER
              valueFrom:
                secretKeyRef:
                  name: dev-couchdb
                  key: adminUsername
            - name: COUCHDB_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: dev-couchdb
                  key: adminPassword
            - name: COUCHDB_SECRET
              valueFrom:
                secretKeyRef:
                  name: dev-couchdb
                  key: cookieAuthSecret
            - name: ERL_FLAGS
              value: " -name couchdb  -setcookie monster "
          livenessProbe:
            httpGet:
              path: /_up
              port: 5984
            failureThreshold: 3
            initialDelaySeconds: 0
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          readinessProbe:
            httpGet:
              path: /_up
              port: 5984
            failureThreshold: 3
            initialDelaySeconds: 0
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            {}
          volumeMounts:
          - name: config-storage
            mountPath: /opt/couchdb/etc/default.d
          - name: database-storage
            mountPath: /opt/couchdb/data
        - name: clouseau
          image: "kocolosk/couchdb-search:0.2.0"
          imagePullPolicy: IfNotPresent
          volumeMounts:
          - name: database-storage
            mountPath: /opt/couchdb-search/data
      volumes:
        - name: config-storage
          emptyDir: {}
        - name: config
          configMap:
            name: dev-couchdb
            items:
              - key: inifile
                path: chart.ini
              - key: seedlistinifile
                path: seedlist.ini
        - name: database-storage
          emptyDir: {}
---
# Source: budibase-dev/charts/budibase/templates/ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: dev-budibase
  labels:
    helm.sh/chart: budibase-0.3.01
    app.kubernetes.io/name: budibase
    app.kubernetes.io/instance: dev
    app.kubernetes.io/version: "0.0.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    kubernetes.io/ingress.class: gce
    nginx.ingress.kubernetes.io/client-max-body-size: 150M
    nginx.ingress.kubernetes.io/proxy-body-size: 50m
    #
    networking.gke.io/v1beta1.FrontendConfig: dev-budibase-frontend-config
    networking.gke.io/managed-certificates: dev-budibase-certificate
spec:
  rules:
    - host: "dev.budibase.apps.tooploox.com"
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: proxy-service
                port:
                  number: 10000
---
# Source: budibase-dev/charts/budibase/templates/gce-ingress.yaml
#
# apiVersion: networking.k8s.io/v1
# kind: Ingress
# metadata:
#   name: dev-budibase
#   annotations:
#     kubernetes.io/ingress.class: gce
#     #
#
#     networking.gke.io/managed-certificates: dev-budibase-certificate
#
#
#     networking.gke.io/v1beta1.FrontendConfig: dev-budibase-frontend-config
#
# spec:
#   rules:
#
#     - host: "dev.budibase.apps.tooploox.com"
#       http:
#         paths:
#
#           - path: /
#
#             pathType: Prefix
#
#             backend:
#
#               service:
#                 name: proxy-service
#                 port:
#                   number: 10000
#
#
#
#
---
# Source: budibase-dev/charts/budibase/templates/gce-ingress.yaml
apiVersion: cloud.google.com/v1
kind: BackendConfig
metadata:
  name: dev-budibase
spec:
  healthCheck:
    # checkIntervalSec: 15
    # port: 15020
    # type: HTTPS
    requestPath: /builder #root doesn't return 200
---
# Source: budibase-dev/charts/budibase/templates/gce-ingress.yaml
apiVersion: networking.gke.io/v1beta1
kind: FrontendConfig
metadata:
  name: dev-budibase-frontend-config
spec:
  redirectToHttps:
    enabled: true
---
# Source: budibase-dev/charts/budibase/templates/gce-ingress.yaml
apiVersion: networking.gke.io/v1
kind: ManagedCertificate
metadata:
  name: dev-budibase-certificate
  labels:
    helm.sh/chart: budibase-0.3.01
    app.kubernetes.io/name: budibase
    app.kubernetes.io/instance: dev
    app.kubernetes.io/version: "0.0.0"
    app.kubernetes.io/managed-by: Helm
spec:
  domains:
    - "dev.budibase.apps.tooploox.com"
---
# Source: budibase-dev/charts/budibase/templates/tests/test-connection.yaml
apiVersion: v1
kind: Pod
metadata:
  name: "dev-budibase-test-connection"
  labels:
    helm.sh/chart: budibase-0.3.01
    app.kubernetes.io/name: budibase
    app.kubernetes.io/instance: dev
    app.kubernetes.io/version: "0.0.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: wget
      image: busybox
      command: ['wget']
      args: ['dev-budibase:10000']
  restartPolicy: Never
